rules_version = '2';

// SmartVolt Guardian - Firestore Security Rules
// Deploy via: firebase deploy --only firestore:rules
//
// NOTE: These rules currently allow any authenticated user to read/write.
// For production, restrict to specific user UIDs or implement role-based access.

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Telemetry data - readable by authenticated users, writable by server only
    match /telemetry/{document=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // Commands - only authenticated users can write commands
    match /commands/{document=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // Deny all other access by default
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
